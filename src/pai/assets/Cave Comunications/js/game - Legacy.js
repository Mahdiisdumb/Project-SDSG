const musicTracks = ["1.mp3", "2.mp3", "3.mp3", "4.mp3", "5.mp3", "6.ogg", "7.ogg", "8.ogg", "9.ogg", "10.ogg"]; let chosenTrack = musicTracks[Math.floor(Math.random() * musicTracks.length)]; const audio = document.createElement('audio'); audio.src = chosenTrack; audio.volume = 0.5; audio.loop = !0; audio.id = "bg-music"; document.body.appendChild(audio); const olAudio = document.createElement('audio'); olAudio.src = "OL.ogg"; olAudio.volume = 0.5; olAudio.loop = !0; olAudio.id = "ol-music"; document.body.appendChild(olAudio); let isLowHPMusicPlaying = !1; function startMusic() {
    if (!isLowHPMusicPlaying) { audio.play() }
    document.body.removeEventListener('click', startMusic); document.body.removeEventListener('keydown', startMusic)
}
document.body.addEventListener('click', startMusic, { once: !0 }); document.body.addEventListener('keydown', startMusic, { once: !0 }); function playLowHPMusic() { if (!isLowHPMusicPlaying) { audio.pause(); olAudio.currentTime = 0; olAudio.play(); isLowHPMusicPlaying = !0 } }
function stopLowHPMusic() { if (isLowHPMusicPlaying) { olAudio.pause(); audio.play(); isLowHPMusicPlaying = !1 } }
function checkLowHP() { const lowOpponent = opponents && opponents.find(op => op.hp > 0 && op.hp <= 20); if (lowOpponent) { playLowHPMusic() } else { stopLowHPMusic() } }
const mercyPatterns = [["compliment", "compliment", "compliment", "compliment", "compliment", "insult"], ["insult", "insult", "compliment", "compliment", "insult"], ["compliment", "insult", "compliment", "insult", "compliment"], ["compliment", "compliment", "insult", "insult", "compliment"], ["insult", "compliment", "insult", "compliment", "insult"], ["compliment", "compliment", "compliment", "insult", "insult"], ["insult", "insult", "insult", "compliment", "compliment"], ["compliment", "insult", "insult", "compliment", "compliment"], ["compliment", "insult", "compliment", "compliment", "insult"], ["insult", "compliment", "compliment", "insult", "compliment"], ["compliment", "compliment", "insult", "compliment", "insult", "compliment"], ["insult", "compliment", "insult", "compliment", "compliment", "insult"], ["compliment", "insult", "insult", "compliment", "compliment", "insult"], ["compliment", "compliment", "compliment", "compliment", "insult", "insult"], ["insult", "insult", "compliment", "insult", "compliment", "compliment"], ["compliment", "insult", "compliment", "insult", "compliment", "insult"], ["insult", "compliment", "insult", "compliment", "insult", "compliment"], ["compliment", "compliment", "insult", "compliment", "insult", "compliment"], ["insult", "compliment", "compliment", "insult", "compliment", "insult"], ["compliment", "insult", "compliment", "compliment", "insult", "compliment"]]; let playerHP, playerItems, turnActive, attackInterval, pointerPos; let menuState, selectedIndex; let insults, compliments; let opponents, selectedOpponentIndex; let globalKeyHandlerBound = !1; const opponentNames = ["Paper", "Sand", "Flowerpot", "Boreiel", "Undone", "Alfice", "Asbore", "Metta-gone", "Napstablank", "Tempy", "BurgerShorts", "Muffin", "Creature Kid", "Jerrican", "Doggo", "Greater Cat", "Lesser Cat", "Glad Smarty", "Shywrong", "Gersad", "Kindy", "Doggy", "Grassrake", "Baron", "Washout", "Moldbig", "weakaircraft", "Volcano", "Not like", "waterrake", "pi", "Dipin", "Character", "Dreamer", "Mettaboy", "Flowbee", "Tormentor", "Unfine", "Ascore", "Napstapunk", "Temptation", "Burgerking", "Muffintop", "Unusual Pal", "Jerrycan", "Kitty", "Greater Wolf", "Lesser Wolf", "Happy Smarty", "Shyright", "Germson", "Bratcat", "Kitbrat", "Snowman", "Aarun", "Washya", "Moldtiny", "Tsunderecar", "Vulkan", "Not Sorry",]; function generateOpponents() {
    const count = Math.floor(Math.random() * 3) + 1; const usedNames = new Set(); const opponents = []; for (let i = 0; i < count; i++) { let name; do { name = opponentNames[Math.floor(Math.random() * opponentNames.length)] } while (usedNames.has(name)); usedNames.add(name); opponents.push({ name, hp: 100, state: "angry", mercyPattern: mercyPatterns[Math.floor(Math.random() * mercyPatterns.length)], mercyProgress: 0 }) }
    return opponents
}
window.startGameInit = function (name, color, soulPng) { playerSoulColor = color || "#ff0000"; playerSoulPng = soulPng || "r.png"; playerName = name || "Your"; playerHP = 100; playerItems = Math.floor(Math.random() * 4) + 1; turnActive = !0; attackInterval = null; pointerPos = 0; menuState = "main"; selectedIndex = 0; insults = ["You're as useless as the 'ueue' in 'queue'!", "I'd explain it to you, but I left my English-to-Dingbat dictionary at home.", "You're like a cloud. When you disappear, it's a beautiful day.", "If you were any more inbred, you'd be a sandwich.", "You bring everyone so much joy... when you leave.", "I'd agree with you, but then we'd both be wrong.", "You're not stupid; you just have bad luck when it comes to thinking.", "Somewhere out there is a tree tirelessly producing oxygen for you. You owe it an apology.", "You have something on your chin... no, the third one down.", "If I wanted to hear from an idiot, I'd just watch reality TV."]; compliments = ["You have a great sense of humor!", "Your positivity is infectious!", "You are a true friend!", "You have a brilliant mind!", "Your creativity knows no bounds!", "You light up the room!", "You are incredibly thoughtful!", "You have a heart of gold!", "You are a great listener!", "You make the world a better place!"]; opponents = generateOpponents(); selectedOpponentIndex = 0; document.getElementById('player-name-label').textContent = playerName; updateHP(); enableMenu(); logMessage(`<b>Welcome, <span style="color:${playerSoulColor};">${playerName}</span>!</b><br>Use arrow keys to select, Z to confirm, X to go back.`); if (!globalKeyHandlerBound) { document.addEventListener('keydown', globalKeyHandler); globalKeyHandlerBound = !0 } }; function showOpponentMenu(actionType) { disableMenu(); menuState = "opponent"; selectedOpponentIndex = 0; renderOpponentMenu(actionType) }
function renderOpponentMenu(actionType) {
    let menu = document.getElementById('opponent-menu'); if (!menu) { menu = document.createElement('div'); menu.id = 'opponent-menu'; menu.style.position = 'absolute'; menu.style.top = '40%'; menu.style.left = '50%'; menu.style.transform = 'translate(-50%, -50%)'; menu.style.background = '#222'; menu.style.color = '#fff'; menu.style.padding = '20px'; menu.style.borderRadius = '10px'; menu.style.zIndex = '1000'; document.body.appendChild(menu) }
    menu.innerHTML = `<img src="${playerSoulPng}" alt="Soul" style="width:64px;height:64px;margin-bottom:10px;"><br>`; menu.innerHTML += `<b>Choose opponent to ${actionType}:</b><br>`; opponents.forEach((op, i) => { let indicator = i === selectedOpponentIndex ? `<img src="${playerSoulPng}" alt="Select" style="vertical-align:middle;width:20px;height:20px;margin-right:6px;">` : ""; menu.innerHTML += `<button data-index="${i}" style="margin:4px 0;${i === selectedOpponentIndex ? 'font-weight:bold;' : ''}">${indicator}${op.name} (${op.hp} HP)</button><br>` }); menu.style.display = 'block'; document.onkeydown = function (e) { if (menuState !== "opponent") return; if (e.code === "ArrowUp") { selectedOpponentIndex = (selectedOpponentIndex - 1 + opponents.length) % opponents.length; playUISound(moveAudio); renderOpponentMenu(actionType) } else if (e.code === "ArrowDown") { selectedOpponentIndex = (selectedOpponentIndex + 1) % opponents.length; playUISound(moveAudio); renderOpponentMenu(actionType) } else if (e.code === "KeyZ") { playUISound(selectAudio); menu.style.display = 'none'; document.onkeydown = null; turnActive = !0; if (actionType === "Slur") { menuState = "attack"; showFightAttack() } else if (actionType === "act") { menuState = "act"; showActMenu() } } else if (e.code === "KeyX") { playUISound(selectAudio); menu.style.display = 'none'; document.onkeydown = null; enableMenu() } }; Array.from(menu.querySelectorAll('button')).forEach((btn, i) => { btn.onclick = () => { playUISound(selectAudio); selectedOpponentIndex = i; menu.style.display = 'none'; document.onkeydown = null; turnActive = !0; if (actionType === "Slur") { menuState = "attack"; showFightAttack() } else if (actionType === "act") { menuState = "act"; showActMenu() } } })
}
function showActMenu() { menuState = "act"; selectedIndex = 0; showMenu() }
function updateHP() { document.getElementById('player-hp').textContent = playerHP; let enemyHPs = opponents.map(op => `${op.name}: ${op.hp}`).join(", "); document.getElementById('enemy-hp').textContent = enemyHPs; document.getElementById('item-count').textContent = playerItems; checkLowHP() }
function logMessage(msg) {
    let mercyMsg = ""; if (opponents.length > 0 && typeof selectedOpponentIndex === "number" && opponents[selectedOpponentIndex]) {
        const op = opponents[selectedOpponentIndex]; if (op.mercyPattern.length > 0 && op.mercyProgress < op.mercyPattern.length) {
            mercyMsg = `<br><b>Mercy Requirement for ${op.name}:</b> ${op.mercyPattern.map((a, i) => {
                if (i === op.mercyProgress) return `<u>${a.toUpperCase()}</u>`;
                return a.toUpperCase();
            }).join(" → ")}`
        }
    }
    let olMsg = ""; if (isLowHPMusicPlaying) { olMsg = `<br><span style="color:#ff4444;font-weight:bold;">Choked up! the opponent is spare-able or one shot!</span>` }
    let fleeMsg = ""; if (playerHP <= 20) { fleeMsg = `<br><span style="color:#ffcc00;font-weight:bold;">Tip: You can flee by selecting Mercy &gt; Flee!</span>` }
    document.getElementById('log').innerHTML = msg.replace(/\n/g, '<br>') + mercyMsg + olMsg + fleeMsg
}
function disableMenu() { turnActive = !1; document.getElementById('main-menu').style.display = 'none'; document.getElementById('act-menu').style.display = 'none'; document.getElementById('mercy-menu').style.display = 'none' }
function enableMenu() { turnActive = !0; menuState = "main"; selectedIndex = 0; showMenu() }
function showMenu() {
    const mainMenu = document.getElementById('main-menu'); if (menuState === "main") { mainMenu.style.display = 'flex'; const btns = mainMenu.querySelectorAll("button"); btns.forEach((btn, i) => { btn.classList.toggle("selected", i === selectedIndex); btn.innerHTML = btn.textContent.replace(/^(\s*<img.*?>)?/, ""); if (i === selectedIndex) { btn.innerHTML = `<img src="${playerSoulPng}" alt="Select" style="vertical-align:middle;width:20px;height:20px;margin-right:6px;">${btn.textContent}` } else { btn.innerHTML = btn.textContent } }) } else { mainMenu.style.display = 'none' } ["act-menu", "mercy-menu"].forEach(menuId => {
        const menu = document.getElementById(menuId); menu.style.display = menuState === menuId.replace('-menu', '') ? 'flex' : 'none'; const btns = menu.querySelectorAll("button"); btns.forEach((btn, i) => {
            btn.classList.toggle("selected", i === selectedIndex); btn.innerHTML = btn.textContent.replace(/^(\s*<img.*?>)?/, ""); if (menuId === "mercy-menu" && i === 1) { btn.textContent = "Flee" }
            if (i === selectedIndex) { btn.innerHTML = `<img src="${playerSoulPng}" alt="Select" style="vertical-align:middle;width:20px;height:20px;margin-right:6px;">${btn.textContent}` } else { btn.innerHTML = btn.textContent }
        })
    })
}
function highlightSelected() {
    let btns; if (menuState === "main") { btns = document.querySelectorAll("#main-menu button") } else if (menuState === "act") { btns = document.querySelectorAll("#act-menu button") } else if (menuState === "mercy") { btns = document.querySelectorAll("#mercy-menu button") } else { return }
    btns.forEach((btn, i) => { btn.classList.toggle("selected", i === selectedIndex); btn.innerHTML = btn.textContent.replace(/^(\s*<img.*?>)?/, ""); if (i === selectedIndex) { btn.innerHTML = `<img src="${playerSoulPng}" alt="Select" style="vertical-align:middle;width:20px;height:20px;margin-right:6px;">${btn.textContent}` } else { btn.innerHTML = btn.textContent } })
}
function handleMenuConfirm() { if (!turnActive) return; playUISound(selectAudio); if (menuState === "main") { if (selectedIndex === 0) showOpponentMenu("Slur"); else if (selectedIndex === 1) showOpponentMenu("act"); else if (selectedIndex === 2) useItem(); else if (selectedIndex === 3) showMercy(); } else if (menuState === "act") { if (selectedIndex === 0) actInsult(); else if (selectedIndex === 1) actCompliment(); else if (selectedIndex === 2) backToMenu(); } else if (menuState === "mercy") { if (selectedIndex === 0) spare(); else if (selectedIndex === 1) flee(); else if (selectedIndex === 2) backToMenu(); } }
function handleMenuBack() { if (!turnActive) return; if (menuState === "act" || menuState === "mercy") { backToMenu() } }
function handleArrow(dir) { let maxIndex = 0; if (menuState === "main") maxIndex = 3; else if (menuState === "act" || menuState === "mercy") maxIndex = 2; if (dir === "left") selectedIndex = (selectedIndex - 1 + maxIndex + 1) % (maxIndex + 1); else if (dir === "right") selectedIndex = (selectedIndex + 1) % (maxIndex + 1); playUISound(moveAudio); highlightSelected() }
function showFightAttack() { if (!turnActive) return; disableMenu(); menuState = "attack"; document.getElementById('attack-bar-container').style.display = 'block'; pointerPos = 0; movePointer(); logMessage(`Press Z to slur ${opponents[selectedOpponentIndex].name} when the timing bar is near the center of the center! (the more it is to the center the more bad the slur is)`); document.addEventListener('keydown', attackKeyHandler, { once: !0 }) }
function movePointer() { attackInterval = setInterval(() => { pointerPos += 5; if (pointerPos > 268) pointerPos = 0; document.getElementById('player-img').style.left = pointerPos + 'px' }, 20) }
function attackKeyHandler(e) {
    if (e.code === 'KeyZ') {
        clearInterval(attackInterval); document.getElementById('attack-bar-container').style.display = 'none'; let damage = 0; if (pointerPos >= 134 && pointerPos <= 166) { damage = Math.floor(Math.random() * 10) + 20 } else if (pointerPos >= 104 && pointerPos <= 196) { damage = Math.floor(Math.random() * 10) + 10 } else { damage = Math.floor(Math.random() * 5) + 5 }
        const opponent = opponents[selectedOpponentIndex]; opponent.hp -= damage; if (opponent.hp < 0) opponent.hp = 0; slashAudio.currentTime = 0; slashAudio.play(); logMessage(`You Cussed out ${opponent.name}!<br>${opponent.name} loses ${damage} mental health.`); updateHP(); menuState = "main"; selectedIndex = 0; totalInsults++; if (opponent.hp <= 0) {
            totalKilled++; logMessage(`${opponent.name} is defeated!`); killAudio.currentTime = 0; killAudio.play(); opponents.splice(selectedOpponentIndex, 1); updateHP(); if (opponents.length === 0) { endGame("You win! All opponents are defeated."); return }
            selectedOpponentIndex = 0
        }
        setTimeout(enemyTurn, 1200)
    }
}
function actInsult() {
    if (!turnActive) return; totalInsults++; disableMenu(); const insult = insults[Math.floor(Math.random() * insults.length)]; const opponent = opponents[selectedOpponentIndex]; opponent.state = "angry"; opponent.hp -= Math.floor(Math.random() * 8) + 5; if (opponent.hp < 0) opponent.hp = 0; slashAudio.currentTime = 0; slashAudio.play(); if (opponent.mercyPattern.length > 0 && opponent.mercyPattern[opponent.mercyProgress] === "insult") { opponent.mercyProgress++ }
    logMessage(`You insult ${opponent.name}: "${insult}"<br>${opponent.name} is angry and loses some mental health.`); updateHP(); menuState = "main"; selectedIndex = 0; if (opponent.hp <= 0) {
        totalKilled++; logMessage(`${opponent.name} is defeated!`); killAudio.currentTime = 0; killAudio.play(); opponents.splice(selectedOpponentIndex, 1); updateHP(); if (opponents.length === 0) { endGame("You win! All opponents are defeated."); return }
        selectedOpponentIndex = 0
    }
    setTimeout(enemyTurn, 1200)
}
function actCompliment(fromMercy = !1) {
    if (!turnActive) return; totalCompliments++; disableMenu(); const compliment = compliments[Math.floor(Math.random() * compliments.length)]; const opponent = opponents[selectedOpponentIndex]; opponent.state = "calm"; opponent.hp += Math.floor(Math.random() * 8) + 5; ohealAudio.currentTime = 0; ohealAudio.play(); if (opponent.mercyPattern.length > 0 && opponent.mercyPattern[opponent.mercyProgress] === "compliment") { opponent.mercyProgress++ }
    logMessage(`You compliment ${opponent.name}: "${compliment}"<br>${opponent.name} is calmed and gains some mental health.`); updateHP(); setTimeout(() => { menuState = "main"; selectedIndex = 0; if (fromMercy) { enableMenu(); showMercy() } else { enemyTurn() } }, 1200)
}
function useItem() { if (!turnActive) return; if (playerItems > 0) { playerItems--; let heal = Math.floor(Math.random() * 15) + 10; playerHP += heal; if (playerHP > 100) playerHP = 100; healAudio.currentTime = 0; healAudio.play(); logMessage(`You used a self-care item.<br>You gain ${heal} mental health.<br>Items left: ${playerItems}`); updateHP(); disableMenu(); menuState = "main"; selectedIndex = 0; setTimeout(enemyTurn, 1200) } else { logMessage("No items left!") } }
function enemyTurn() {
    if (opponents.length === 0) { endGame("You win! All opponents are defeated."); return }
    if (playerHP <= 0) { endGame("You lost! Your mental health is depleted."); return }
    disableMenu(); const actingOpponent = opponents[Math.floor(Math.random() * opponents.length)]; let action; if (actingOpponent.state === "angry") { action = "insult" } else { action = Math.random() < 0.5 ? "compliment" : "insult" }
    if (action === "insult") { const insult = insults[Math.floor(Math.random() * insults.length)]; const damage = Math.floor(Math.random() * 16) + 5; playerHP -= damage; if (playerHP < 0) playerHP = 0; hurtAudio.currentTime = 0; hurtAudio.play(); logMessage(`${actingOpponent.name} insults: "${insult}"<br>You lose ${damage} mental health.`) } else { const compliment = compliments[Math.floor(Math.random() * compliments.length)]; const heal = Math.floor(Math.random() * 11) + 5; playerHP += heal; if (playerHP > 100) playerHP = 100; healAudio.currentTime = 0; healAudio.play(); logMessage(`${actingOpponent.name} compliments: "${compliment}"<br>You gain ${heal} mental health.`) }
    updateHP(); if (playerHP <= 0) { endGame("You lost! Your mental health is depleted.") } else { setTimeout(enableMenu, 1200) }
}
function endGame(msg) {
    let endingMsg = msg; if (opponents.length === 0) {
        if (totalKilled > 0 && totalSpared === 0) { endingMsg += "<br><br><b>GO TO HELL MURDERERاللعنة عليك اذهب اقتل نفسك ولا تقتل أي شخص أبدا!</b>" } else if (totalSpared > 0 && totalKilled === 0) { endingMsg += "<br><br><b>Very Impresive you didnt kill anyone. يمكنك الحصول على رحمتي الآن لعدم الصراخ عليّ</b>" } else if (totalSpared > 0 && totalKilled > 0) { endingMsg += `<br><br><b>Uhh Ok so you used self Defense judging by my data. DATA: Had Mercy On:${totalSpared} Had no mercy on: ${totalKilled}. Your actions would make you be a nuetral guy</b>` }
        endingMsg += `<br><br><i> EH EH here is more data you nerd! Total Insults: ${totalInsults}, Total Compliments: ${totalCompliments}</i>`
    } else if (playerHP <= 0) { endingMsg += "<br><br><b>Your mental health was depleted. Did you listen enough, or did you fight too much?</b>" }
    logMessage(endingMsg); disableMenu(); document.getElementById('reset').style.display = 'inline-block'; audio.pause(); olAudio.pause(); isLowHPMusicPlaying = !1; if (msg.toLowerCase().includes("win") || msg.toLowerCase().includes("spared all opponents")) { winAudio.currentTime = 0; winAudio.play() } else if (msg.toLowerCase().includes("lost") || msg.toLowerCase().includes("depleted")) { loseAudio.currentTime = 0; loseAudio.play() }
}
function resetGame() { playerHP = 100; playerItems = Math.floor(Math.random() * 4) + 1; opponents = generateOpponents(); updateHP(); logMessage("Game restarted!"); enableMenu(); document.getElementById('reset').style.display = 'none'; chosenTrack = musicTracks[Math.floor(Math.random() * musicTracks.length)]; audio.src = chosenTrack; audio.currentTime = 0; olAudio.pause(); isLowHPMusicPlaying = !1; audio.play(); winAudio.pause(); loseAudio.pause(); totalInsults = 0; totalCompliments = 0; totalSpared = 0; totalKilled = 0; if (playerName) { document.getElementById('player-name-label').textContent = playerName } }
function globalKeyHandler(e) { if (!turnActive) return; if (menuState === "attack") return; if (menuState === "opponent") return; if (e.code === "ArrowLeft") handleArrow("left"); else if (e.code === "ArrowRight") handleArrow("right"); else if (e.code === "KeyZ") handleMenuConfirm(); else if (e.code === "KeyX") handleMenuBack(); }
if (!document.getElementById('opponent-menu')) { const menuDiv = document.createElement('div'); menuDiv.id = 'opponent-menu'; menuDiv.style.display = 'none'; menuDiv.style.position = 'absolute'; menuDiv.style.top = '40%'; menuDiv.style.left = '50%'; menuDiv.style.transform = 'translate(-50%, -50%)'; menuDiv.style.background = '#222'; menuDiv.style.color = '#fff'; menuDiv.style.padding = '20px'; menuDiv.style.borderRadius = '10px'; menuDiv.style.zIndex = '1000'; document.body.appendChild(menuDiv) }
const winAudio = document.createElement('audio'); winAudio.src = "w.ogg"; winAudio.id = "win-sound"; document.body.appendChild(winAudio); const loseAudio = document.createElement('audio'); loseAudio.src = "l.mp3"; loseAudio.id = "lose-sound"; document.body.appendChild(loseAudio); const hurtAudio = document.createElement('audio'); hurtAudio.src = "hurt.wav"; hurtAudio.id = "hurt-sound"; document.body.appendChild(hurtAudio); const slashAudio = document.createElement('audio'); slashAudio.src = "slash.wav"; slashAudio.id = "slash-sound"; document.body.appendChild(slashAudio); const healAudio = document.createElement('audio'); healAudio.src = "heal.wav"; healAudio.id = "heal-sound"; document.body.appendChild(healAudio); const ohealAudio = document.createElement('audio'); ohealAudio.src = "oheal.wav"; ohealAudio.id = "oheal-sound"; document.body.appendChild(ohealAudio); const spareAudio = document.createElement('audio'); spareAudio.src = "s.wav"; spareAudio.id = "spare-sound"; document.body.appendChild(spareAudio); const killAudio = document.createElement('audio'); killAudio.src = "k.mp3"; killAudio.id = "kill-sound"; document.body.appendChild(killAudio); const moveAudio = document.createElement('audio'); moveAudio.src = "mv.wav"; moveAudio.id = "move-sound"; moveAudio.preload = "auto"; moveAudio.volume = 1; document.body.appendChild(moveAudio); const selectAudio = document.createElement('audio'); selectAudio.src = "sel.wav"; selectAudio.id = "select-sound"; selectAudio.preload = "auto"; selectAudio.volume = 1; document.body.appendChild(selectAudio); function playUISound(audio) { audio.pause(); audio.currentTime = 0; audio.play() }
const soulDisplay = document.createElement('div'); soulDisplay.id = 'player-soul-display'; soulDisplay.style.position = 'absolute'; soulDisplay.style.bottom = '10px'; soulDisplay.style.left = '10px'; soulDisplay.style.zIndex = '100'; soulDisplay.style.display = 'flex'; soulDisplay.style.alignItems = 'center'; soulDisplay.style.fontSize = '18px'; soulDisplay.style.color = '#fff'; soulDisplay.style.backgroundColor = 'rgba(0, 0, 0, 0.7)'; soulDisplay.style.padding = '10px'; soulDisplay.style.borderRadius = '8px'; document.body.appendChild(soulDisplay); const soulImg = document.createElement('img'); soulImg.id = 'player-soul-img'; soulImg.src = playerSoulPng; soulImg.style.width = '32px'; soulImg.style.height = '32px'; soulImg.style.marginRight = '8px'; soulDisplay.appendChild(soulImg); const soulName = document.createElement('span'); soulName.id = 'player-soul-name'; soulName.textContent = "Your Soul Color"; soulDisplay.appendChild(soulName); soulDisplay.style.display = 'none'; function showPlayerSoul() { const soulType = playerSoulPng.split('.')[0]; soulImg.src = playerSoulPng; soulName.textContent = playerName || "Your Color"; soulDisplay.style.display = 'flex' }
setInterval(() => { showPlayerSoul() }, 1); function showMercy() { if (!turnActive) return; menuState = "mercy"; selectedIndex = 0; showMenu() }
function backToMenu() { if (!turnActive) return; menuState = "main"; selectedIndex = 0; showMenu() }
function spare() { if (!turnActive) return; disableMenu(); const opponent = opponents[selectedOpponentIndex]; if (opponent && (isLowHPMusicPlaying || (opponent.mercyPattern.length > 0 && opponent.mercyProgress >= opponent.mercyPattern.length))) { totalSpared++; logMessage(`You spared ${opponent.name}! Peace is restored for them.`); spareAudio.currentTime = 0; spareAudio.play(); opponents.splice(selectedOpponentIndex, 1); updateHP(); if (opponents.length === 0) { endGame("You spared all opponents! Peace is restored.") } else { selectedOpponentIndex = 0; setTimeout(enableMenu, 1200) } } else { logMessage("You can't spare yet! Complete the mercy requirement first."); setTimeout(() => { menuState = "main"; selectedIndex = 0; enableMenu() }, 1200) } }
function flee() {
    if (!turnActive) return; disableMenu(); if (playerHP > 20) { logMessage("You can only flee when your HP is 20 or less! What are you a Wuss"); setTimeout(() => { enableMenu(); menuState = "main"; selectedIndex = 0; showMenu() }, 1200); return }
    logMessage("You fled the battle! Yea you needed it."); setTimeout(() => { resetGame() }, 1500)
}
let totalInsults = 0; let totalCompliments = 0; let totalSpared = 0; let totalKilled = 0